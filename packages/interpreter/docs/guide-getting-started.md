# はじめに（クイックスタート）

> Generated by Claude Opus 4.6

## 1. インストール

```bash
npm install @kaedevn/interpreter
```

## 2. 最小の .ksc スクリプト

`hello.ksc`:

```ksc
// はじめてのスクリプト

bg("school_day")

#narrator
ここは学園。
晴れた日の午後。
#

#hero
こんにちは！
ビジュアルノベルエンジンの世界へようこそ。
#
```

## 3. ConsoleEngine を使う

パッケージに公式コンソール実装 `ConsoleEngine` が含まれている。IEngineAPI を自分で書く必要はない。

```typescript
import { Interpreter, ConsoleEngine } from "@kaedevn/interpreter";

const engine = new ConsoleEngine();
const interpreter = new Interpreter(engine);
```

`ConsoleEngine` は全17メソッドを実装しており、スクリプトの動作確認にそのまま使える。詳細は [guide-console-engine.md](guide-console-engine.md) を参照。

## 4. 実行

```typescript
import * as fs from "fs";
import { Interpreter, ConsoleEngine } from "@kaedevn/interpreter";

const engine = new ConsoleEngine();
const interpreter = new Interpreter(engine);

const script = fs.readFileSync("hello.ksc", "utf-8");
await interpreter.run(script);
```

### 4.1 期待される出力

```
[背景] school_day

【ナレーション】
  ここは学園。
  晴れた日の午後。

【hero】
  こんにちは！
  ビジュアルノベルエンジンの世界へようこそ。
```

## 5. 変数と条件分岐を使う

`choice-demo.ksc`:

```ksc
name = "プレイヤー"
affection = 0

#narrator
{name}の冒険が始まる。
#

choice {
  "挨拶する" {
    affection += 3
    #hero
    こんにちは！
    #
  }
  "無視する" {
    #hero
    ...
    #
  }
}

if (affection >= 3) {
  #heroine
  あなた、いい人ね。
  #
} else {
  #heroine
  ...冷たいのね。
  #
}
```

## 6. デバッグモードで実行

```typescript
const interpreter = new Interpreter(engine, { debug: true });
const dbg = interpreter.getDebugger();

dbg.watchVariable("affection");
dbg.enableTrace();

await interpreter.run(script);

// 変数変更履歴を確認
const history = dbg.getVariableHistory("affection");
console.log("affection の変更履歴:", history);

// トレースログを確認
console.log("トレースログ:", dbg.getTraceLog());
```

## 7. 次のステップ

| やりたいこと | 参照ドキュメント |
|---|---|
| ConsoleEngine の詳細・拡張方法 | [guide-console-engine.md](guide-console-engine.md) |
| スクリプトの書き方を学ぶ | [guide-scripting.md](guide-scripting.md) |
| IEngineAPI を本格実装する | [guide-engine-implementation.md](guide-engine-implementation.md) |
| 言語仕様を確認する | [spec-ksc-language.md](spec-ksc-language.md) |
| API リファレンスを見る | [api-reference.md](api-reference.md) |
| コマンド一覧を確認する | [spec-builtin-commands.md](spec-builtin-commands.md) |
