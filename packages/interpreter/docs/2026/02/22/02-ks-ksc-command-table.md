# KS / KSC コマンド対応表の作成

## 背景

エディタへの KSC スクリプトブロック追加を受け、手動でスクリプトを記述するにあたって KS と KSC の構文を並べて参照できる表が必要になった。
また、作業中に以下の認識修正があった：

- KS を「旧」と表記していたが、KS と KSC は共存しており作者が選択して使用する。継続サポートのため「旧」表記は不適切。

## 方針

- 既存の `docs/ksc-command-reference.md` とは別に、コマンドだけに絞った参照しやすい表を `docs/command-table.md` として作成
- 全カテゴリを網羅：表示・演出、セリフ、テキスト制御、オーディオ、待機、フロー制御、変数、関数定義

## 変更ファイル一覧

| # | ファイル | 変更 |
|---|---------|------|
| 1 | `docs/command-table.md` | 新規作成（KS/KSC コマンド対応表） |
| 2 | `docs/ksc-command-reference.md` | 「旧」「現行」表記を削除、共存・選択制の説明に修正 |
| 3 | `docs/09_reports/2026/02/22/01-ksc-command-reference.md` | 教訓の記述を修正（同上） |
| 4 | `.claude/skills/save-report/skill.md` | トリガー表現を追加 |

## 実装の詳細

### command-table.md の構成

| セクション | 内容 |
|---|---|
| 表示・演出 | bg / ch / ch_hide / ch_clear / ch_anim |
| セリフ | ダイアローグブロックの書き方、変数補間 |
| テキスト制御 | @l / @p / @r と KSC の対応 |
| オーディオ | bgm / bgm_stop / se / voice |
| 待機 | wait（単位の違いを明記）/ waitclick |
| フロー制御 | jump / call / ret / if / choice |
| タイムライン / バトル | KSC のみ対応 |
| 変数 | 代入・複合代入演算子 |
| 関数定義 | def / sub（KSC のみ） |

### save-report スキルへの追加トリガー

```
"文書を保存して"
"ここに保存して"
"保存して"
"作成したmdを保存して"
"文書作成して"
"ドキュメント保存して"
```

暗黙のトリガーとして、「保存」「文書」「ドキュメント」「md」「まとめ」キーワードを含む指示でも発動するよう明記。

## 教訓

- KS と KSC は「旧/新」ではなく「コンパイラ形式 / インタープリタ形式」として並立する別物
- `@wait 0.5`（KS=秒）と `wait(500)`（KSC=ミリ秒）の単位違いは特に注意が必要
- スキルのトリガーは具体的なキーワードを多く列挙しておくことで誤検知を防ぎつつ網羅できる
